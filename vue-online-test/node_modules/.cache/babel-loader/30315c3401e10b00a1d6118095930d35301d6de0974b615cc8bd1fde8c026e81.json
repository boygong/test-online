{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { Button, Loading } from 'element-ui';\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      id: null,\n      password: null,\n      name: null,\n      classname: null,\n      Id1: null,\n      password1: null,\n      confirmPassword: null\n    };\n  },\n  methods: {\n    handleBeforeUnload() {\n      // 在用户离开页面之前执行清理操作\n      localStorage.removeItem('user');\n    },\n    ToMain() {\n      if (!this.id || !this.password) {\n        this.$message({\n          message: '请输入账号和密码',\n          type: 'error'\n        });\n        return;\n      }\n      Loading.service();\n      const userData = {\n        studentId: this.id,\n        password: this.password\n      };\n      axios.post('http://localhost:4399/admin', userData).then(response => {\n        console.log(response.data);\n        const token = response.data;\n        localStorage.setItem('token', token);\n        this.$message({\n          message: '登录成功',\n          type: 'success'\n        });\n        localStorage.setItem('user', JSON.stringify(userData));\n        this.$router.push('/home/about');\n      }).catch(() => {}).finally(() => {\n        Loading.service().close(); // 关闭加载状态\n      });\n    },\n\n    tosign() {\n      if (!this.name || !this.classname || !this.Id1 || !this.password1 || !this.confirmPassword) {\n        this.$message({\n          message: '请填写完整注册信息',\n          type: 'error'\n        });\n        return;\n      }\n      if (this.password1 !== this.confirmPassword) {\n        this.$message({\n          message: '两次密码输入不一致',\n          type: 'error'\n        });\n        return;\n      }\n      if (this.Id1 > 100000) {\n        this.$message({\n          message: 'id过长',\n          type: 'error'\n        });\n        return;\n      }\n      if (this.class_name > 6 || this.class_name < 1) {\n        this.$message({\n          message: '班级序号有误',\n          type: 'error'\n        });\n        return;\n      }\n      Loading.service();\n      const userData = {\n        studentId: this.Id1,\n        password: this.password1,\n        className: this.classname,\n        name: this.name\n      };\n      axios.post('http://localhost:4399/sign', userData).then(response => {\n        console.log(response.data);\n      }).catch(error => {\n        if (error.response.status === 400) {\n          console.log(error.response.data);\n        }\n        this.$message.error('出错啦~');\n      }).finally(() => {\n        Loading.service().close(); // 关闭加载状态\n      });\n    }\n  },\n\n  components: {\n    Button\n  },\n  created() {\n    window.addEventListener('beforeunload', this.handleBeforeUnload);\n  },\n  beforeDestroy() {\n    window.removeEventListener('beforeunload', this.handleBeforeUnload);\n  }\n};","map":{"version":3,"names":["Button","Loading","axios","data","id","password","name","classname","Id1","password1","confirmPassword","methods","handleBeforeUnload","localStorage","removeItem","ToMain","$message","message","type","service","userData","studentId","post","then","response","console","log","token","setItem","JSON","stringify","$router","push","catch","finally","close","tosign","class_name","className","error","status","components","created","window","addEventListener","beforeDestroy","removeEventListener"],"sources":["src/views/AdminView.vue"],"sourcesContent":["<template>\r\n  <div class=\"wrapper\">\r\n    <div class=\"card-switch\">\r\n      <label class=\"switch\">\r\n        <input type=\"checkbox\" class=\"toggle\">\r\n        <span class=\"slider\"></span>\r\n        <span class=\"card-side\"></span>\r\n        <div class=\"flip-card__inner\">\r\n          <div class=\"flip-card__front\">\r\n            <div class=\"title\">Log in</div>\r\n            <form class=\"flip-card__form\">\r\n              <input class=\"flip-card__input\" v-model=\"id\" name=\"id\" placeholder=\"id\">\r\n              <input class=\"flip-card__input\" v-model=\"password\" name=\"password\" placeholder=\"Password\" type=\"password\">\r\n              <Button class=\"flip-card__btn\" @click=\"ToMain\">Let`s go!</Button>\r\n            </form>\r\n          </div>\r\n          <div class=\"flip-card__back\">\r\n            <div class=\"title\">Sign up</div>\r\n            <form class=\"flip-card__form\">\r\n              <input class=\"flip-card__input\" v-model=\"name\" placeholder=\"Name\">\r\n              <input class=\"flip-card__input\" v-model=\"classname\" name=\"class_name\" placeholder=\"软件x班\">\r\n              <input class=\"flip-card__input\" v-model=\"Id1\" name=\"student_id\" placeholder=\"Id\">\r\n              <input class=\"flip-card__input\" v-model=\"password1\" name=\"password\" placeholder=\"Password\" type=\"password\">\r\n              <input class=\"flip-card__input\" v-model=\"confirmPassword\" name=\"confirm_password\" placeholder=\"Confirm Password\" type=\"password\">\r\n              <button class=\"flip-card__btn\" @click=\"tosign\">Confirm!</button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </label>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Button, Loading } from 'element-ui';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      id: null,\r\n      password: null,\r\n      name: null,\r\n      classname: null,\r\n      Id1: null,\r\n      password1: null,\r\n      confirmPassword: null\r\n    };\r\n  },\r\n  methods: {\r\n    handleBeforeUnload() {\r\n      // 在用户离开页面之前执行清理操作\r\n      localStorage.removeItem('user');\r\n    },\r\n    ToMain() {\r\n      if (!this.id || !this.password) {\r\n        this.$message({\r\n          message: '请输入账号和密码',\r\n          type: 'error'\r\n        });\r\n        return;\r\n      }\r\n      Loading.service();\r\n      const userData = {\r\n        studentId: this.id,\r\n        password: this.password\r\n      };\r\n      axios.post('http://localhost:4399/admin', userData)\r\n        .then(response => {\r\n          console.log(response.data);\r\n          const token = response.data;\r\n          localStorage.setItem('token', token);\r\n          this.$message({ message: '登录成功', type: 'success' });\r\n          localStorage.setItem('user', JSON.stringify(userData));\r\n          this.$router.push('/home/about');\r\n        })\r\n        .catch(()=> {\r\n        \r\n        })\r\n        .finally(() => {\r\n          Loading.service().close(); // 关闭加载状态\r\n        });\r\n    },\r\n\r\n    tosign() {\r\n      if (!this.name || !this.classname || !this.Id1 || !this.password1 || !this.confirmPassword) {\r\n        this.$message({\r\n          message: '请填写完整注册信息',\r\n          type: 'error'\r\n        });\r\n        return;\r\n      }\r\n      if (this.password1 !== this.confirmPassword) {\r\n        this.$message({\r\n          message: '两次密码输入不一致',\r\n          type: 'error'\r\n        });\r\n        return;\r\n      }\r\n      if (this.Id1 > 100000) {\r\n        this.$message({\r\n          message: 'id过长',\r\n          type: 'error'\r\n        });\r\n        return;\r\n      }\r\n      if (this.class_name > 6 || this.class_name < 1) {\r\n        this.$message({\r\n          message: '班级序号有误',\r\n          type: 'error'\r\n        });\r\n        return;\r\n      }\r\n      Loading.service();\r\n      const userData = {\r\n        studentId: this.Id1,\r\n        password: this.password1,\r\n        className: this.classname,\r\n        name: this.name\r\n      };\r\n      axios.post('http://localhost:4399/sign', userData)\r\n        .then(response => {\r\n          console.log(response.data);\r\n        })\r\n        .catch(error => {\r\n          if (error.response.status === 400) {\r\n            console.log(error.response.data);\r\n          }\r\n          this.$message.error('出错啦~');\r\n        })\r\n        .finally(() => {\r\n          Loading.service().close(); // 关闭加载状态\r\n        });\r\n    }\r\n  },\r\n  components: {\r\n    Button\r\n  },\r\n  created() {\r\n    window.addEventListener('beforeunload', this.handleBeforeUnload);\r\n  },\r\n  beforeDestroy() {\r\n    window.removeEventListener('beforeunload', this.handleBeforeUnload);\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.wrapper {\r\n  --input-focus: #2d8cf0;\r\n  --font-color: #323232;\r\n  --font-color-sub: #666;\r\n  --bg-color: #fff;\r\n  --bg-color-alt: #666;\r\n  --main-color: #323232;\r\n    /* display: flex; */\r\n    /* flex-direction: column; */\r\n    /* align-items: center; */\r\n    background-image: url(\"../assets/home.jpg\");\r\n    background-size: cover;\r\n    background-position: center;\r\n    width: 100%;\r\n    height: 100vh;\r\n}\r\n.card-switch{\r\n  padding-top: 15%;\r\n  margin-left: 45%;\r\n}\r\n/* switch card */\r\n.switch {\r\n  transform: translateY(-200px);\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 30px;\r\n  width: 50px;\r\n  height: 20px;\r\n}\r\n.card-side::before {\r\n  position: absolute;\r\n  content: 'Log in';\r\n  left: -70px;\r\n  top: 0;\r\n  width: 100px;\r\n  text-decoration: underline;\r\n  color: var(--font-color);\r\n  font-weight: 600;\r\n}\r\n\r\n.card-side::after {\r\n  position: absolute;\r\n  content: 'Sign up';\r\n  left: 70px;\r\n  top: 0;\r\n  width: 100px;\r\n  text-decoration: none;\r\n  color: var(--font-color);\r\n  font-weight: 600;\r\n}\r\n\r\n.toggle {\r\n  opacity: 0;\r\n  width: 0;\r\n  height: 0;\r\n}\r\n\r\n.slider {\r\n  box-sizing: border-box;\r\n  border-radius: 5px;\r\n  border: 2px solid var(--main-color);\r\n  box-shadow: 4px 4px var(--main-color);\r\n  position: absolute;\r\n  cursor: pointer;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: var(--bg-colorcolor);\r\n  transition: 0.3s;\r\n}\r\n\r\n.slider:before {\r\n  box-sizing: border-box;\r\n  position: absolute;\r\n  content: \"\";\r\n  height: 20px;\r\n  width: 20px;\r\n  border: 2px solid var(--main-color);\r\n  border-radius: 5px;\r\n  left: -2px;\r\n  bottom: 2px;\r\n  background-color: var(--bg-color);\r\n  box-shadow: 0 3px 0 var(--main-color);\r\n  transition: 0.3s;\r\n}\r\n\r\n.toggle:checked + .slider {\r\n  background-color: var(--input-focus);\r\n}\r\n\r\n.toggle:checked + .slider:before {\r\n  transform: translateX(30px);\r\n}\r\n\r\n.toggle:checked ~ .card-side:before {\r\n  text-decoration: none;\r\n}\r\n\r\n.toggle:checked ~ .card-side:after {\r\n  text-decoration: underline;\r\n}\r\n\r\n/* card */ \r\n\r\n.flip-card__inner {\r\n  width: 300px;\r\n  height: 350px;\r\n  position: relative;\r\n  background-color: transparent;\r\n  perspective: 1000px;\r\n    /* width: 100%;\r\n    height: 100%; */\r\n  text-align: center;\r\n  transition: transform 0.8s;\r\n  transform-style: preserve-3d;\r\n}\r\n\r\n.toggle:checked ~ .flip-card__inner {\r\n  transform: rotateY(180deg);\r\n}\r\n\r\n.toggle:checked ~ .flip-card__front {\r\n  box-shadow: none;\r\n}\r\n\r\n.flip-card__front, .flip-card__back {\r\n  padding: 20px;\r\n  position: absolute;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  -webkit-backface-visibility: hidden;\r\n  backface-visibility: hidden;\r\n  background: lightgrey;\r\n  gap: 20px;\r\n  border-radius: 5px;\r\n  border: 2px solid var(--main-color);\r\n  box-shadow: 4px 4px var(--main-color);\r\n}\r\n\r\n.flip-card__back {\r\n  width: 100%;\r\n  transform: rotateY(180deg);\r\n}\r\n\r\n.flip-card__form {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 20px;\r\n}\r\n\r\n.title {\r\n  margin: 20px 0 20px 0;\r\n  font-size: 25px;\r\n  font-weight: 900;\r\n  text-align: center;\r\n  color: var(--main-color);\r\n}\r\n\r\n.flip-card__input {\r\n  width: 250px;\r\n  height: 40px;\r\n  border-radius: 5px;\r\n  border: 2px solid var(--main-color);\r\n  background-color: var(--bg-color);\r\n  box-shadow: 4px 4px var(--main-color);\r\n  font-size: 15px;\r\n  font-weight: 600;\r\n  color: var(--font-color);\r\n  padding: 5px 10px;\r\n  outline: none;\r\n}\r\n\r\n.flip-card__input::placeholder {\r\n  color: var(--font-color-sub);\r\n  opacity: 0.8;\r\n}\r\n\r\n.flip-card__input:focus {\r\n  border: 2px solid var(--input-focus);\r\n}\r\n\r\n.flip-card__btn:active, .button-confirm:active {\r\n  box-shadow: 0px 0px var(--main-color);\r\n  transform: translate(3px, 3px);\r\n}\r\n\r\n.flip-card__btn {\r\n  margin: 20px 0 20px 0;\r\n  width: 120px;\r\n  height: 40px;\r\n  border-radius: 5px;\r\n  border: 2px solid var(--main-color);\r\n  background-color: var(--bg-color);\r\n  box-shadow: 4px 4px var(--main-color);\r\n  font-size: 17px;\r\n  font-weight: 600;\r\n  color: var(--font-color);\r\n  cursor: pointer;\r\n} \r\n</style>"],"mappings":";AAkCA,SAAAA,MAAA,EAAAC,OAAA;AACA,OAAAC,KAAA;AAEA;EACAC,KAAA;IACA;MACAC,EAAA;MACAC,QAAA;MACAC,IAAA;MACAC,SAAA;MACAC,GAAA;MACAC,SAAA;MACAC,eAAA;IACA;EACA;EACAC,OAAA;IACAC,mBAAA;MACA;MACAC,YAAA,CAAAC,UAAA;IACA;IACAC,OAAA;MACA,UAAAX,EAAA,UAAAC,QAAA;QACA,KAAAW,QAAA;UACAC,OAAA;UACAC,IAAA;QACA;QACA;MACA;MACAjB,OAAA,CAAAkB,OAAA;MACA,MAAAC,QAAA;QACAC,SAAA,OAAAjB,EAAA;QACAC,QAAA,OAAAA;MACA;MACAH,KAAA,CAAAoB,IAAA,gCAAAF,QAAA,EACAG,IAAA,CAAAC,QAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,QAAA,CAAArB,IAAA;QACA,MAAAwB,KAAA,GAAAH,QAAA,CAAArB,IAAA;QACAU,YAAA,CAAAe,OAAA,UAAAD,KAAA;QACA,KAAAX,QAAA;UAAAC,OAAA;UAAAC,IAAA;QAAA;QACAL,YAAA,CAAAe,OAAA,SAAAC,IAAA,CAAAC,SAAA,CAAAV,QAAA;QACA,KAAAW,OAAA,CAAAC,IAAA;MACA,GACAC,KAAA,QAEA,GACAC,OAAA;QACAjC,OAAA,CAAAkB,OAAA,GAAAgB,KAAA;MACA;IACA;;IAEAC,OAAA;MACA,UAAA9B,IAAA,UAAAC,SAAA,UAAAC,GAAA,UAAAC,SAAA,UAAAC,eAAA;QACA,KAAAM,QAAA;UACAC,OAAA;UACAC,IAAA;QACA;QACA;MACA;MACA,SAAAT,SAAA,UAAAC,eAAA;QACA,KAAAM,QAAA;UACAC,OAAA;UACAC,IAAA;QACA;QACA;MACA;MACA,SAAAV,GAAA;QACA,KAAAQ,QAAA;UACAC,OAAA;UACAC,IAAA;QACA;QACA;MACA;MACA,SAAAmB,UAAA,aAAAA,UAAA;QACA,KAAArB,QAAA;UACAC,OAAA;UACAC,IAAA;QACA;QACA;MACA;MACAjB,OAAA,CAAAkB,OAAA;MACA,MAAAC,QAAA;QACAC,SAAA,OAAAb,GAAA;QACAH,QAAA,OAAAI,SAAA;QACA6B,SAAA,OAAA/B,SAAA;QACAD,IAAA,OAAAA;MACA;MACAJ,KAAA,CAAAoB,IAAA,+BAAAF,QAAA,EACAG,IAAA,CAAAC,QAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,QAAA,CAAArB,IAAA;MACA,GACA8B,KAAA,CAAAM,KAAA;QACA,IAAAA,KAAA,CAAAf,QAAA,CAAAgB,MAAA;UACAf,OAAA,CAAAC,GAAA,CAAAa,KAAA,CAAAf,QAAA,CAAArB,IAAA;QACA;QACA,KAAAa,QAAA,CAAAuB,KAAA;MACA,GACAL,OAAA;QACAjC,OAAA,CAAAkB,OAAA,GAAAgB,KAAA;MACA;IACA;EACA;;EACAM,UAAA;IACAzC;EACA;EACA0C,QAAA;IACAC,MAAA,CAAAC,gBAAA,sBAAAhC,kBAAA;EACA;EACAiC,cAAA;IACAF,MAAA,CAAAG,mBAAA,sBAAAlC,kBAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}