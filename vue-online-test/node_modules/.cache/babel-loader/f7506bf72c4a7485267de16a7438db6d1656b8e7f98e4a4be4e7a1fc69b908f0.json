{"ast":null,"code":"import axios from 'axios';\nexport default {\n  data() {\n    return {\n      tableData: [],\n      student: {\n        studentId: '',\n        name: '',\n        className: ''\n      },\n      pageSize: 10,\n      pagerCount: 10,\n      PagerTotal: 10,\n      dialogFormVisible: false,\n      editFormData: {\n        studentId: \"\",\n        name: \"\",\n        className: \"\",\n        password: \"\"\n\n        // 其他表单项\n      },\n\n      form: {\n        name: '',\n        region: '',\n        date1: '',\n        date2: '',\n        delivery: false,\n        type: [],\n        resource: '',\n        desc: ''\n      },\n      formLabelWidth: '120px',\n      className: [{\n        value: '',\n        label: '空'\n      }, {\n        value: '0',\n        label: '软件1班'\n      }, {\n        value: '1',\n        label: '软件2班'\n      }, {\n        value: '2',\n        label: '软件3班'\n      }, {\n        value: '3',\n        label: '软件4班'\n      }, {\n        value: '4',\n        label: '软件5班'\n      }, {\n        value: '5',\n        label: '软件6班'\n      }],\n      value: '',\n      currentStudent: null\n    };\n  },\n  methods: {\n    findStudent() {\n      axios({\n        method: 'get',\n        url: 'http://localhost:4399/student/getStudentByInform',\n        params: this.student\n      }).then(res => {\n        this.tableData = res.data.data.students;\n        console.log(this.tableData);\n      });\n    },\n    handlePageChange(page) {\n      const currentPage = page;\n      const pageSize = this.pageSize;\n      axios.get(`http://localhost:4399/student/getStudentByPage?page=${currentPage}&pageSize=${pageSize}`).then(response => {\n        this.tableData = response.data.data.source;\n      });\n    },\n    openEditDialog(student) {\n      // 打开编辑对话框，并填充表单数据\n      console.log(\"触发方法\");\n      this.dialogFormVisible = true;\n      this.editFormData = {\n        ...student\n      };\n      this.currentStudent = student; // 存储当前学生数据\n    },\n\n    saveStudentData() {\n      // 检查是否有修改\n      const isModified = !this.isDataEqual(this.editFormData, this.originalStudentData);\n      if (!isModified) {\n        // 没有修改，弹出提示或其他操作\n        this.$message.warning('数据未修改，无需保存');\n        return;\n      }\n\n      // 在这里发送请求以保存修改后的学生数据\n      // 使用 this.currentStudent 访问当前学生数据\n      // 你可以使用axios或其他HTTP库发送请求\n      // 例如：axios.post('/api/updateStudent', this.editFormData)\n\n      // 请求成功后关闭对话框\n      this.dialogFormVisible = false;\n    },\n    isDataEqual(data1, data2) {\n      // 比较两个数据对象是否相等\n      // 这里可以根据你的数据结构进行比较\n      return JSON.stringify(data1) === JSON.stringify(data2);\n    }\n  },\n  mounted() {\n    axios({\n      method: 'get',\n      url: 'http://localhost:4399/student/getAllStudent'\n    }).then(res => {\n      this.PagerTotal = res.data.data.totalPage;\n      this.tableData = res.data.data.source;\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n};","map":{"version":3,"names":["axios","data","tableData","student","studentId","name","className","pageSize","pagerCount","PagerTotal","dialogFormVisible","editFormData","password","form","region","date1","date2","delivery","type","resource","desc","formLabelWidth","value","label","currentStudent","methods","findStudent","method","url","params","then","res","students","console","log","handlePageChange","page","currentPage","get","response","source","openEditDialog","saveStudentData","isModified","isDataEqual","originalStudentData","$message","warning","data1","data2","JSON","stringify","mounted","totalPage","catch","err"],"sources":["src/views/element/teacherPage.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <el-container style=\"height: 700px; border: 1px solid #eee;width: 2000px;\">\r\n            <el-header style=\"font-size:40px; background-color: rgb(238, 241, 246)\">线上考试系统教师端</el-header>\r\n            <el-container>\r\n                <el-aside width=\"200px\"><el-menu :default-openeds=\"['1', '3']\">\r\n                        <el-submenu index=\"1\">\r\n                            <template slot=\"title\"><i class=\"el-icon-message\"></i>功能</template>\r\n                            <el-menu-item-group>\r\n                                <el-menu-item index=\"1-1\">学生管理</el-menu-item>\r\n                                <el-menu-item index=\"1-2\">题目管理</el-menu-item>\r\n                                <el-menu-item index=\"1-3\">考试管理</el-menu-item>\r\n                            </el-menu-item-group>\r\n                        </el-submenu>\r\n\r\n                    </el-menu>\r\n                </el-aside>\r\n                <el-main>\r\n                    <el-form :inline=\"true\" :model=\"student\" class=\"demo-form-inline\">\r\n                        <el-form-item label=\"学号\">\r\n                            <el-input v-model=\"student.studentId\" placeholder=\"学生学号\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"姓名\">\r\n                            <el-input v-model=\"student.name\" placeholder=\"学生姓名\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"班级\">\r\n                            <el-select v-model=\"student.className\" placeholder=\"请选择\">\r\n                                <el-option v-for=\"item in className\" :key=\"item.value\" :label=\"item.label\"\r\n                                    :value=\"item.value\">\r\n                                </el-option>\r\n                            </el-select>\r\n                        </el-form-item>\r\n                        <el-form-item>\r\n                            <el-button type=\"primary\" @click=\"findStudent\">查询</el-button>\r\n                        </el-form-item>\r\n                    </el-form>\r\n\r\n\r\n\r\n\r\n                    <el-dialog title=\"编辑学生信息\" :visible.sync=\"dialogFormVisible\">\r\n                        <el-form :model=\"editFormData\" ref=\"editForm\" label-width=\"100px\">\r\n                            <el-form-item label=\"学号\">\r\n                                <el-input v-model=\"editFormData.studentId\"></el-input>\r\n                            </el-form-item>\r\n                            <el-form-item label=\"姓名\">\r\n                                <el-input v-model=\"editFormData.name\"></el-input>\r\n                            </el-form-item>\r\n                            <el-form-item label=\"班级\">\r\n                                <el-input v-model=\"editFormData.className\"></el-input>\r\n                            </el-form-item>\r\n                            <el-form-item label=\"密码\">\r\n                                <el-input v-model=\"editFormData.password\"></el-input>\r\n                            </el-form-item>\r\n                            <!-- 其他表单项 -->\r\n\r\n                            <el-form-item>\r\n                                <el-button type=\"primary\" @click=\"saveStudentData\">确定</el-button>\r\n                            </el-form-item>\r\n                        </el-form>\r\n                    </el-dialog>\r\n\r\n\r\n                    <el-table :data=\"tableData\" style=\"width: 100%\">\r\n                        <el-table-column prop=\"id\" label=\"序号\" width=\"220\">\r\n                        </el-table-column>\r\n                        <el-table-column prop=\"studentId\" label=\"学号\" width=\"220\">\r\n                        </el-table-column>\r\n                        <el-table-column prop=\"name\" label=\"姓名\" width=\"220\">\r\n                        </el-table-column>\r\n                        <el-table-column prop=\"className\" label=\"班级\" width=\"220\">\r\n                            <template slot-scope=\"scope\">\r\n                                <span v-if=\"scope.row.className === 0\">软件1班</span>\r\n                                <span v-else-if=\"scope.row.className === 1\">软件2班</span>\r\n                                <span v-else-if=\"scope.row.className === 2\">软件3班</span>\r\n                                <span v-else-if=\"scope.row.className === 3\">软件4班</span>\r\n                                <span v-else-if=\"scope.row.className === 4\">软件5班</span>\r\n                                <span v-else-if=\"scope.row.className === 5\">软件6班</span>\r\n                                <span v-else>未知班级</span>\r\n                            </template>\r\n                        </el-table-column>\r\n                        <el-table-column prop=\"password\" label=\"学生密码\" width=\"220\">\r\n                        </el-table-column>\r\n                        <el-table-column label=\"查看学生考试信息\" width=\"220\">\r\n                            <el-button type=\"info\" plain>查看</el-button>\r\n                        </el-table-column>\r\n                        <el-table-column label=\"编辑学生信息\" width=\"220\">\r\n                            <el-button slot-scope=\"scope\" type=\"primary\" @click=\"openEditDialog(scope.row)\">编辑</el-button>\r\n                        </el-table-column>\r\n                    </el-table>\r\n\r\n\r\n                    <el-pagination :page-size=\"pageSize\" layout=\"prev, pager, next\" :total=\"PagerTotal\"\r\n                        @current-change=\"handlePageChange\"></el-pagination>\r\n                </el-main>\r\n            </el-container>\r\n        </el-container>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nexport default {\r\n    data() {\r\n        return {\r\n            tableData: [],\r\n            student: {\r\n                studentId: '',\r\n                name: '',\r\n                className: ''\r\n            },\r\n            pageSize: 10,\r\n            pagerCount: 10,\r\n            PagerTotal: 10,\r\n            dialogFormVisible: false,\r\n            editFormData: {\r\n                studentId: \"\",\r\n                name: \"\",\r\n                className: \"\",\r\n                password: \"\",\r\n\r\n                // 其他表单项\r\n            },\r\n            form: {\r\n                name: '',\r\n                region: '',\r\n                date1: '',\r\n                date2: '',\r\n                delivery: false,\r\n                type: [],\r\n                resource: '',\r\n                desc: ''\r\n            },\r\n            formLabelWidth: '120px',\r\n            className: [{\r\n                value: '',\r\n                label: '空'\r\n            }, {\r\n                value: '0',\r\n                label: '软件1班'\r\n            }, {\r\n                value: '1',\r\n                label: '软件2班'\r\n            }, {\r\n                value: '2',\r\n                label: '软件3班'\r\n            }, {\r\n                value: '3',\r\n                label: '软件4班'\r\n            }, {\r\n                value: '4',\r\n                label: '软件5班'\r\n            }, {\r\n                value: '5',\r\n                label: '软件6班'\r\n            }\r\n            ],\r\n            value: '',\r\n            currentStudent: null\r\n        }\r\n    },\r\n    methods: {\r\n        findStudent() {\r\n            axios({\r\n                method: 'get',\r\n                url: 'http://localhost:4399/student/getStudentByInform',\r\n                params: this.student,\r\n            }).then(res => {\r\n                this.tableData = res.data.data.students;\r\n                console.log(this.tableData);\r\n            })\r\n        },\r\n        handlePageChange(page) {\r\n            const currentPage = page;\r\n            const pageSize = this.pageSize;\r\n\r\n            axios.get(`http://localhost:4399/student/getStudentByPage?page=${currentPage}&pageSize=${pageSize}`)\r\n                .then((response) => {\r\n                    this.tableData = response.data.data.source;\r\n                })\r\n        },\r\n        openEditDialog(student) {\r\n            // 打开编辑对话框，并填充表单数据\r\n            console.log(\"触发方法\");\r\n            this.dialogFormVisible = true;\r\n            this.editFormData = { ...student };\r\n            this.currentStudent = student; // 存储当前学生数据\r\n        },\r\n        saveStudentData() {\r\n            // 检查是否有修改\r\n            const isModified = !this.isDataEqual(this.editFormData, this.originalStudentData);\r\n\r\n            if (!isModified) {\r\n                // 没有修改，弹出提示或其他操作\r\n                this.$message.warning('数据未修改，无需保存');\r\n                return;\r\n            }\r\n\r\n            // 在这里发送请求以保存修改后的学生数据\r\n            // 使用 this.currentStudent 访问当前学生数据\r\n            // 你可以使用axios或其他HTTP库发送请求\r\n            // 例如：axios.post('/api/updateStudent', this.editFormData)\r\n\r\n            // 请求成功后关闭对话框\r\n            this.dialogFormVisible = false;\r\n        },\r\n        isDataEqual(data1, data2) {\r\n            // 比较两个数据对象是否相等\r\n            // 这里可以根据你的数据结构进行比较\r\n            return JSON.stringify(data1) === JSON.stringify(data2);\r\n        }\r\n    },\r\n    mounted() {\r\n        axios({\r\n            method: 'get',\r\n            url: 'http://localhost:4399/student/getAllStudent'\r\n        }).then(res => {\r\n            this.PagerTotal = res.data.data.totalPage;\r\n            this.tableData = res.data.data.source;\r\n        }).catch(err => {\r\n            console.log(err)\r\n        })\r\n    }\r\n}\r\n</script>\r\n\r\n<style></style>"],"mappings":"AAqGA,OAAAA,KAAA;AACA;EACAC,KAAA;IACA;MACAC,SAAA;MACAC,OAAA;QACAC,SAAA;QACAC,IAAA;QACAC,SAAA;MACA;MACAC,QAAA;MACAC,UAAA;MACAC,UAAA;MACAC,iBAAA;MACAC,YAAA;QACAP,SAAA;QACAC,IAAA;QACAC,SAAA;QACAM,QAAA;;QAEA;MACA;;MACAC,IAAA;QACAR,IAAA;QACAS,MAAA;QACAC,KAAA;QACAC,KAAA;QACAC,QAAA;QACAC,IAAA;QACAC,QAAA;QACAC,IAAA;MACA;MACAC,cAAA;MACAf,SAAA;QACAgB,KAAA;QACAC,KAAA;MACA;QACAD,KAAA;QACAC,KAAA;MACA;QACAD,KAAA;QACAC,KAAA;MACA;QACAD,KAAA;QACAC,KAAA;MACA;QACAD,KAAA;QACAC,KAAA;MACA;QACAD,KAAA;QACAC,KAAA;MACA;QACAD,KAAA;QACAC,KAAA;MACA,EACA;MACAD,KAAA;MACAE,cAAA;IACA;EACA;EACAC,OAAA;IACAC,YAAA;MACA1B,KAAA;QACA2B,MAAA;QACAC,GAAA;QACAC,MAAA,OAAA1B;MACA,GAAA2B,IAAA,CAAAC,GAAA;QACA,KAAA7B,SAAA,GAAA6B,GAAA,CAAA9B,IAAA,CAAAA,IAAA,CAAA+B,QAAA;QACAC,OAAA,CAAAC,GAAA,MAAAhC,SAAA;MACA;IACA;IACAiC,iBAAAC,IAAA;MACA,MAAAC,WAAA,GAAAD,IAAA;MACA,MAAA7B,QAAA,QAAAA,QAAA;MAEAP,KAAA,CAAAsC,GAAA,wDAAAD,WAAA,aAAA9B,QAAA,IACAuB,IAAA,CAAAS,QAAA;QACA,KAAArC,SAAA,GAAAqC,QAAA,CAAAtC,IAAA,CAAAA,IAAA,CAAAuC,MAAA;MACA;IACA;IACAC,eAAAtC,OAAA;MACA;MACA8B,OAAA,CAAAC,GAAA;MACA,KAAAxB,iBAAA;MACA,KAAAC,YAAA;QAAA,GAAAR;MAAA;MACA,KAAAqB,cAAA,GAAArB,OAAA;IACA;;IACAuC,gBAAA;MACA;MACA,MAAAC,UAAA,SAAAC,WAAA,MAAAjC,YAAA,OAAAkC,mBAAA;MAEA,KAAAF,UAAA;QACA;QACA,KAAAG,QAAA,CAAAC,OAAA;QACA;MACA;;MAEA;MACA;MACA;MACA;;MAEA;MACA,KAAArC,iBAAA;IACA;IACAkC,YAAAI,KAAA,EAAAC,KAAA;MACA;MACA;MACA,OAAAC,IAAA,CAAAC,SAAA,CAAAH,KAAA,MAAAE,IAAA,CAAAC,SAAA,CAAAF,KAAA;IACA;EACA;EACAG,QAAA;IACApD,KAAA;MACA2B,MAAA;MACAC,GAAA;IACA,GAAAE,IAAA,CAAAC,GAAA;MACA,KAAAtB,UAAA,GAAAsB,GAAA,CAAA9B,IAAA,CAAAA,IAAA,CAAAoD,SAAA;MACA,KAAAnD,SAAA,GAAA6B,GAAA,CAAA9B,IAAA,CAAAA,IAAA,CAAAuC,MAAA;IACA,GAAAc,KAAA,CAAAC,GAAA;MACAtB,OAAA,CAAAC,GAAA,CAAAqB,GAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}